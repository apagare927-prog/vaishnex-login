<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vaishnex Login</title>

<link rel="stylesheet"
 href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"></script>

<style>
body{
  margin:0;height:100vh;
  background:radial-gradient(circle at top,#0a1a2f,#000);
  display:flex;align-items:center;justify-content:center;
  font-family:Arial;color:#fff;
}
.card{
  width:92%;max-width:380px;
  background:#0f172a;
  padding:28px;border-radius:22px;
  text-align:center;
  box-shadow:0 25px 70px rgba(0,0,0,.7);
}
.logo-ring{
  width:120px;height:120px;margin:0 auto 14px;
  border-radius:50%;border:3px solid #3b82f6;
  display:flex;align-items:center;justify-content:center;
  animation:glow 1.6s ease-in-out infinite;
}
@keyframes glow{
  0%,100%{box-shadow:0 0 25px #3b82f6}
  50%{box-shadow:0 0 70px #3b82f6}
}
.dynamic{font-size:14px;color:#94a3b8;margin-bottom:10px}

input,button{
  width:100%;padding:14px;
  margin-top:12px;border-radius:12px;
  border:none;font-size:15px;
}
input{
  background:#020617;color:#fff;
  border:2px solid transparent;
}
input.error{border-color:#ef4444}
button{background:#3b82f6;color:#fff;cursor:pointer}

.hidden{display:none}
.error-text{color:#ef4444;font-size:14px;margin-top:6px}
.timer{color:#94a3b8;margin-top:8px}

.iti{width:100%}
.iti__country-list{background:#0f172a!important;color:#fff!important}
</style>
</head>

<body>
<div class="card">

  <div class="logo-ring"><b>VAISHNEX</b></div>
  <div class="dynamic">Smart access starts here</div>

  <!-- LOGIN INPUT -->
  <input id="loginInput" placeholder="Email or mobile number">
  <div id="error" class="error-text"></div>

  <!-- PHONE -->
  <div id="phoneWrap" class="hidden">
    <input id="phoneInput">
  </div>

  <!-- OTP -->
  <div id="otpBox" class="hidden">
    <input id="otpInput" placeholder="Enter OTP" maxlength="6">
    <div id="otpError" class="error-text"></div>
  </div>

  <button id="sendBtn">Send OTP</button>
  <button id="resendBtn" class="hidden">Resend OTP</button>
  <div id="timer" class="timer hidden"></div>

</div>

<script>
const loginInput=document.getElementById("loginInput");
const phoneWrap=document.getElementById("phoneWrap");
const phoneInput=document.getElementById("phoneInput");
const error=document.getElementById("error");

const otpBox=document.getElementById("otpBox");
const otpInput=document.getElementById("otpInput");
const otpError=document.getElementById("otpError");

const sendBtn=document.getElementById("sendBtn");
const resendBtn=document.getElementById("resendBtn");
const timerBox=document.getElementById("timer");

let iti=null;
let timer=null;
let mode=null;

/* Detect email / phone */
loginInput.addEventListener("input",()=>{
  clearError();
  const v=loginInput.value.trim();
  mode=null;

  if(v===""){phoneWrap.classList.add("hidden");return;}

  if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v)){
    phoneWrap.classList.add("hidden");
    mode="email";
    error.innerText="OTP will be sent to email";
    return;
  }

  if(/^[0-9+ ]+$/.test(v)){
    phoneWrap.classList.remove("hidden");
    mode="phone";
    if(!iti){
      iti=intlTelInput(phoneInput,{initialCountry:"in",separateDialCode:true});
    }
    phoneInput.value=v;
  }else{
    phoneWrap.classList.add("hidden");
  }
});

/* Send OTP */
sendBtn.onclick=()=>{
  clearError();clearOtpError();

  if(!mode){showError("Enter valid email or mobile");return;}
  if(mode==="phone" && (!iti || !iti.isValidNumber())){
    showError("Invalid mobile number");return;
  }

  otpBox.classList.remove("hidden");     // â¬…ï¸ OTP field open
  sendBtn.classList.add("hidden");       // â¬…ï¸ Send OTP hide
  resendBtn.classList.remove("hidden");  // â¬…ï¸ Resend show
  resendBtn.disabled=true;
  startTimer();
};

/* Auto login on OTP complete */
otpInput.addEventListener("input",()=>{
  clearOtpError();

  if(otpInput.value.length<4){
    showOtpError("OTP too short");
    return;
  }

  if(otpInput.value.length>=4){
    // ðŸ”¥ AUTO LOGIN / SIGN UP (UI)
    alert("OTP verified â†’ Auto Login / Sign Up");
  }
});

/* Timer */
function startTimer(){
  let t=30;
  timerBox.classList.remove("hidden");
  timerBox.innerText=`Resend OTP in ${t}s`;
  clearInterval(timer);

  timer=setInterval(()=>{
    t--;
    timerBox.innerText=`Resend OTP in ${t}s`;
    if(t<=0){
      clearInterval(timer);
      timerBox.classList.add("hidden");
      resendBtn.disabled=false;
    }
  },1000);
}
resendBtn.onclick=()=>sendBtn.onclick();

/* Errors */
function showError(m){loginInput.classList.add("error");error.innerText=m;}
function clearError(){loginInput.classList.remove("error");error.innerText="";}
function showOtpError(m){otpInput.classList.add("error");otpError.innerText=m;}
function clearOtpError(){otpInput.classList.remove("error");otpError.innerText="";}
</script>

</body>
</html>
