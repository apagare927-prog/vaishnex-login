<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vaishnex Login</title>

<!-- REAL country selector -->
<link rel="stylesheet"
 href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"></script>

<style>
body{
  margin:0;
  height:100vh;
  background:radial-gradient(circle at top,#0a1a2f,#000);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:Arial,sans-serif;
  color:#fff;
}
.card{
  width:92%;
  max-width:380px;
  background:#0f172a;
  padding:28px;
  border-radius:22px;
  box-shadow:0 25px 70px rgba(0,0,0,.7);
  text-align:center;
}

/* Logo */
.logo-ring{
  width:120px;
  height:120px;
  margin:0 auto 14px;
  border-radius:50%;
  border:3px solid #3b82f6;
  display:flex;
  align-items:center;
  justify-content:center;
  animation:glowPulse 1.6s ease-in-out infinite;
}
@keyframes glowPulse{
  0%,100%{box-shadow:0 0 25px #3b82f6}
  50%{box-shadow:0 0 70px #3b82f6}
}

h3{margin-bottom:4px}
.dynamic-line{
  font-size:14px;
  color:#94a3b8;
  min-height:18px;
}

input,button{
  width:100%;
  padding:14px;
  margin-top:12px;
  border-radius:12px;
  border:none;
  font-size:15px;
}
input{
  background:#020617;
  color:#fff;
  border:2px solid transparent;
}
input:focus{border-color:#3b82f6}
input.error{border-color:#ef4444}

button{
  background:#3b82f6;
  color:#fff;
  cursor:pointer;
}

.hidden{display:none}
.error-text{
  color:#ef4444;
  font-size:14px;
  margin-top:6px;
}
.timer{
  color:#94a3b8;
  margin-top:8px;
}

/* intl-tel-input fix */
.iti{width:100%}
.iti--allow-dropdown input{
  padding-left:90px !important;
}
</style>
</head>

<body>
<div class="card">

  <div class="logo-ring"><b>VAISHNEX</b></div>
  <h3>Welcome</h3>
  <div id="dynamicLine" class="dynamic-line"></div>

  <input id="loginInput" placeholder="Email or mobile number">
  <div id="errorMsg" class="error-text"></div>

  <div id="otpBox" class="hidden">
    <input id="otpInput" placeholder="Enter OTP">
  </div>

  <button id="sendBtn">Send OTP</button>

  <div id="timer" class="timer hidden"></div>
  <button id="resendBtn" class="hidden">Resend OTP</button>

</div>

<script>
/* ðŸ” Dynamic welcome lines (no repeat) */
const lines=[
  "Secure login powered by Vaishnex",
  "Fast â€¢ Secure â€¢ Reliable",
  "Your identity, protected",
  "Smart access starts here",
  "Built for trust and speed"
];
let last=localStorage.getItem("vx_line");
let idx;
do{
  idx=Math.floor(Math.random()*lines.length);
}while(idx==last);
localStorage.setItem("vx_line",idx);
document.getElementById("dynamicLine").innerText=lines[idx];

/* Elements */
const input=document.getElementById("loginInput");
const errorMsg=document.getElementById("errorMsg");
const otpBox=document.getElementById("otpBox");
const sendBtn=document.getElementById("sendBtn");
const resendBtn=document.getElementById("resendBtn");
const timerBox=document.getElementById("timer");

/* Country selector init */
const iti=window.intlTelInput(input,{
  initialCountry:"in",
  separateDialCode:true,
  nationalMode:true,
  utilsScript:
   "https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js"
});
iti.container.style.display="none";

/* Detect email / number */
input.addEventListener("input",()=>{
  clearError();
  const v=input.value.trim();

  if(v===""){
    iti.container.style.display="none";
    return;
  }

  // Email
  if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v)){
    iti.container.style.display="none";
    errorMsg.innerText="Email detected";
    return;
  }

  // Number
  if(/^[0-9+ ]+$/.test(v)){
    iti.container.style.display="block";
  }else{
    iti.container.style.display="none";
  }
});

/* Send OTP (UI logic only) */
sendBtn.onclick=()=>{
  clearError();
  const v=input.value.trim();

  if(v===""){
    showError("Field cannot be empty");
    return;
  }

  if(v.includes("@")){
    showError("OTP not required for email");
    return;
  }

  if(!iti.isValidNumber()){
    showError("Invalid mobile number");
    return;
  }

  otpBox.classList.remove("hidden");
  startTimer();
};

/* 30 sec timer */
let timer;
function startTimer(){
  let t=30;
  resendBtn.classList.add("hidden");
  timerBox.classList.remove("hidden");
  timerBox.innerText=`Resend OTP in ${t}s`;
  clearInterval(timer);

  timer=setInterval(()=>{
    t--;
    timerBox.innerText=`Resend OTP in ${t}s`;
    if(t<=0){
      clearInterval(timer);
      timerBox.classList.add("hidden");
      resendBtn.classList.remove("hidden");
    }
  },1000);
}
resendBtn.onclick=()=>sendBtn.click();

/* Error helpers */
function showError(msg){
  input.classList.add("error");
  errorMsg.innerText=msg;
}
function clearError(){
  input.classList.remove("error");
  errorMsg.innerText="";
}
</script>

</body>
</html>
