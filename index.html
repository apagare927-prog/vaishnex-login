<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vaishnex Login</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
body{
  margin:0;
  height:100vh;
  background:radial-gradient(circle at top,#0a1a2f,#000);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial,sans-serif;
  color:#fff;
}
.card{
  width:92%;
  max-width:380px;
  background:#0f172a;
  padding:28px;
  border-radius:22px;
  box-shadow:0 25px 70px rgba(0,0,0,.7);
  text-align:center;
}

/* LOGO SAME */
.logo-ring{
  width:120px;height:120px;
  margin:0 auto 16px;
  border-radius:50%;
  border:3px solid #3b82f6;
  display:flex;
  align-items:center;
  justify-content:center;
  animation:glowPulse 1.6s ease-in-out infinite;
}
@keyframes glowPulse{
  0%,100%{box-shadow:0 0 25px #3b82f6}
  50%{box-shadow:0 0 65px #3b82f6}
}

input,button{
  width:100%;
  padding:14px;
  margin-top:10px;
  border-radius:12px;
  border:none;
  font-size:15px;
}
input{background:#020617;color:#fff}
button{
  background:#3b82f6;
  color:#fff;
  cursor:pointer;
}
button:disabled{opacity:.5}

/* Country */
.country-btn{
  background:#020617;
  text-align:left;
}
.country-list{
  display:none;
  max-height:200px;
  overflow:auto;
  background:#020617;
  border-radius:12px;
}
.country-item{
  padding:12px;
  cursor:pointer;
}
.country-item:hover{background:#020617;color:#3b82f6}

.hidden{display:none}
.timer{margin-top:8px;color:#94a3b8;font-size:14px}
</style>
</head>

<body>
<div class="card">

  <div class="logo-ring"><b>VAISHNEX</b></div>
  <h3>Login with Mobile</h3>

  <!-- PHONE STEP -->
  <div id="step-phone">
    <button class="country-btn" onclick="toggleCountry()">
      üåç <span id="countryText">India (+91)</span>
    </button>

    <div class="country-list" id="countryList">
      <div class="country-item" onclick="selectCountry('+91','India')">üáÆüá≥ India (+91)</div>
      <div class="country-item" onclick="selectCountry('+1','USA')">üá∫üá∏ USA (+1)</div>
      <div class="country-item" onclick="selectCountry('+44','UK')">üá¨üáß UK (+44)</div>
      <div class="country-item" onclick="selectCountry('+971','UAE')">üá¶üá™ UAE (+971)</div>
    </div>

    <input id="phone" placeholder="Mobile number">
    <button onclick="sendOTP()">Send OTP</button>
  </div>

  <!-- OTP STEP -->
  <div id="step-otp" class="hidden">
    <input id="otp" placeholder="Enter OTP">
    <button onclick="verifyOTP()">Verify OTP</button>
    <div class="timer" id="timer">Resend OTP in 60s</div>
    <button id="resendBtn" onclick="resendOTP()" disabled>Resend OTP</button>
  </div>

  <div id="recaptcha-container"></div>
</div>

<script>
/* FIREBASE CONFIG */
const firebaseConfig={
  apiKey:"YOUR_API_KEY",
  authDomain:"YOUR_PROJECT.firebaseapp.com",
  projectId:"YOUR_PROJECT_ID",
  appId:"YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();

let countryCode="+91";
let confirmationResult;
let resendTimer;
let timeLeft=60;

/* Country */
function toggleCountry(){
  const l=document.getElementById("countryList");
  l.style.display=l.style.display==="block"?"none":"block";
}
function selectCountry(code,name){
  countryCode=code;
  document.getElementById("countryText").innerText=`${name} (${code})`;
  document.getElementById("countryList").style.display="none";
}

/* Recaptcha */
window.recaptchaVerifier=new firebase.auth.RecaptchaVerifier(
  "recaptcha-container",{size:"invisible"}
);

/* OTP SEND */
function sendOTP(){
  const phone=document.getElementById("phone").value.trim();
  if(phone.length<6){alert("Valid number daalo");return;}

  firebase.auth()
    .signInWithPhoneNumber(countryCode+phone,window.recaptchaVerifier)
    .then(res=>{
      confirmationResult=res;
      document.getElementById("step-phone").classList.add("hidden");
      document.getElementById("step-otp").classList.remove("hidden");
      startTimer();
    })
    .catch(e=>alert(e.message));
}

/* VERIFY */
function verifyOTP(){
  const code=document.getElementById("otp").value.trim();
  if(!code)return;
  confirmationResult.confirm(code)
    .then(()=>alert("Login Successful üéâ"))
    .catch(()=>alert("Wrong OTP"));
}

/* TIMER */
function startTimer(){
  timeLeft=60;
  document.getElementById("resendBtn").disabled=true;
  resendTimer=setInterval(()=>{
    timeLeft--;
    document.getElementById("timer").innerText=`Resend OTP in ${timeLeft}s`;
    if(timeLeft<=0){
      clearInterval(resendTimer);
      document.getElementById("timer").innerText="Didn't receive OTP?";
      document.getElementById("resendBtn").disabled=false;
    }
  },1000);
}
function resendOTP(){
  sendOTP();
}
</script>

</body>
</html>
